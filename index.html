<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🇯🇵 京阪極簡旅程</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#FFFFFF"> 
    
    <link rel="stylesheet" href="style.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body class="minimalist-theme">

    <header>
        <h1>京阪 6天5夜 🎌</h1>
        <nav class="tab-bar">
            <a href="#itinerary" class="tab-button active" data-target="itinerary-content">行程規劃</a>
            <a href="#tools" class="tab-button" data-target="tools-content">工具箱</a>
        </nav>
    </header>

    <main class="content-wrapper">
        
        <section id="itinerary-content" class="tab-content active">

            <div class="day-card">
                <h2>Day 1: 12/20（六）✈️ 大阪 &rarr; 京都</h2>
                <div class="weather-box three-day-forecast" data-city="Kyoto">
                    <div class="forecast-title">
                        <span>☀️ <strong>[正在載入京都天氣資訊...]</strong></span>
                    </div>
                    <div class="forecast-cards-wrapper">
                        <div class="weather-day-card"><h4>今日</h4><span class="weather-icon">...</span><p class="temp">...</p></div>
                        <div class="weather-day-card"><h4>明日</h4><span class="weather-icon">...</span><p class="temp">...</p></div>
                        <div class="weather-day-card"><h4>後日</h4><span class="weather-icon">...</span><p class="temp">...</p></div>
                    </div>
                </div>

                <div class="item-card transport-card">
                    <h3>✈️ 關西機場 KIX &rarr; 京都</h3>
                    <p>CX564 抵達 (14:55)。搭乘 <strong>JR Haruka 特急</strong> 往京都。</p>
                </div>
                
                <div class="item-card accommodation-card">
                    <h3>🏨 住宿 Check-in</h3>
                    <p>Prince Smart Inn Kyoto Sanjo (京都市役所前周邊)。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Prince+Smart+Inn+Kyoto+Sanjo" target="_blank" class="nav-button">導航到飯店</a>
                </div>

                <div class="item-card food-card">
                    <h3>🏮 晚餐/宵夜：Rokkaku ace 居酒屋</h3>
                    <a href="https://www.google.com/maps/search/?api=1&query=Rokkaku+ace+Kyoto" target="_blank" class="nav-button">導航到居酒屋</a>
                </div>
            </div>
            
            <div class="day-card">
                <h2>Day 2: 12/21（日）⛩️ 清水寺經典巡禮</h2>
                <div class="item-card sight-card">
                    <h3>⛩️ 清水寺 (08:00 前往)</h3>
                    <p>參拜 <strong>大黑天</strong> 🙏 (求財運/開運)。早晨人少。</p>
                    <p class="notes"><strong>攻略重點：</strong> <span class="must-eat">🍡 必吃：藤菜美醬油糰子、Kyo-baum 抹茶霜淇淋</span>。</p>
                    <p class="notes"><strong>伴手禮：</strong> <span class="must-buy">🌶️ 必買：七味家本舖七味粉、茶の菓 (抹茶餅乾)</span>。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Kiyomizu-dera+Temple" target="_blank" class="nav-button">導航到清水寺</a>
                </div>
                
                <div class="item-card sight-card">
                    <h3>👘 花見小路、祇園</h3>
                    <p>感受京都古都風情，傍晚有機會看到藝伎。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Hanamikoji+Street+Gion" target="_blank" class="nav-button">導航到花見小路</a>
                    <div class="sub-item food-card">
                        <h4>🍵 點心：祇園辻利 祇園本店</h4>
                        <p class="notes"><strong>必點菜單：</strong> 抹茶聖代、抹茶蛋糕。</p>
                        <a href="https://www.google.com/maps/search/?api=1&query=Gion+Tsujiri+Gion+Main+Store" target="_blank" class="nav-button sub-nav">導航到祇園辻利</a>
                    </div>
                </div>
                
                <div class="item-card sight-card">
                    <h3>💡 TeamLab Biovortex (17:00 抵達)</h3>
                    <p>沉浸式數位藝術展。預計停留 3-4 小時。</p>
                    <p class="notes"><strong>預約代號：</strong> <span class="important-code">請在此填寫訂票代號</span>。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=teamLab+Biovortex+Kyoto" target="_blank" class="nav-button">導航到 TeamLab</a>
                </div>
            </div>

            <div class="day-card">
                <h2>Day 3: 12/22（一）🚄 京都 &rarr; 大阪 & 梅田</h2>
                <div class="weather-box three-day-forecast" data-city="Osaka">
                    <div class="forecast-title">
                        <span>☀️ <strong>[正在載入大阪天氣資訊...]</strong></span>
                    </div>
                    <div class="forecast-cards-wrapper">
                         <div class="weather-day-card"><h4>今日</h4><span class="weather-icon">...</span><p class="temp">...</p></div>
                        <div class="weather-day-card"><h4>明日</h4><span class="weather-icon">...</span><p class="temp">...</p></div>
                        <div class="weather-day-card"><h4>後日</h4><span class="weather-icon">...</span><p class="temp">...</p></div>
                    </div>
                </div>
                
                <div class="item-card accommodation-card">
                    <h3>🏨 大阪住宿 Check-in</h3>
                    <p>HOTEL FORZA OSAKA KITAHAMA (北濱)。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=HOTEL+FORZA+OSAKA+KITAHAMA" target="_blank" class="nav-button">導航到飯店</a>
                </div>

                <div class="item-card sight-card">
                    <h3>🛍️ 梅田地區購物</h3>
                    <p>阪急、大丸、LUCUA 等百貨區。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Umeda+Station+Osaka" target="_blank" class="nav-button">導航到梅田站</a>
                </div>
                
                <div class="item-card food-card">
                    <h3>🍴 午/晚餐建議</h3>
                    <p>🥢 <strong>備長鰻魚飯</strong> (梅田)；🍰 <strong>Habrs</strong> (水果千層，<span class="must-eat">必點菜單</span>)。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Binchou+Umaji" target="_blank" class="nav-button">導航到備長鰻魚飯</a>
                </div>
            </div>

            <div class="day-card">
                <h2>Day 4: 12/23（二）🌊 伊根舟屋 (天氣彈性日 A)</h2>
                <div class="item-card transport-card">
                    <h3>🚄 長途交通：大阪 &rarr; 伊根</h3>
                    <p>JR &rarr; 福知山 &rarr; 丹後鐵道 &rarr; 天橋立 &rarr; <strong>丹海巴士</strong> &rarr; 伊根 (單程約 4 小時)。</p>
                    <p class="notes"><strong>攻略重點：</strong> 考慮購買 <strong>JR 關西廣域鐵路周遊券</strong>。</p>
                </div>
                
                <div class="item-card sight-card">
                    <h3>🚢 伊根舟屋群</h3>
                    <p>「日本海之京都」。<strong>必玩：</strong> 🛥️ 搭乘<strong>海上TAXI</strong>或<strong>遊覽船</strong>餵食海鷗。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Ine+Funaya" target="_blank" class="nav-button">導航到伊根</a>
                </div>
            </div>

            <div class="day-card">
                <h2>Day 5: 12/24（三）🍁 勝尾寺 + 心齋橋 (彈性日 B)</h2>
                <div class="item-card sight-card">
                    <h3>🙏 勝尾寺 (上午)</h3>
                    <p>滿山遍野的「<strong>勝利達摩</strong>」。阪急巴士前往。</p>
                    <p class="notes"><strong>攻略重點：</strong> 購買達摩後，寫願望畫<strong>右眼</strong>，達成後畫<strong>左眼</strong>奉還。</p>
                    <p class="notes"><strong>伴手禮：</strong> <span class="must-buy">達摩御守、達摩詩籤</span>。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Katsuou-ji+Temple" target="_blank" class="nav-button">導航到勝尾寺</a>
                </div>
                
                <div class="item-card sight-card">
                    <h3>🛍️ 心齋橋逛街 (下午/晚上)</h3>
                    <p>逛街、難波版八神社。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Shinsaibashi-Suji+Shopping+Street" target="_blank" class="nav-button">導航到心齋橋</a>
                </div>
                
                <div class="item-card food-card">
                    <h3>🐙 晚餐/美食探索</h3>
                    <p><strong>必吃美食：</strong> 達摩炸串、心齋橋宮田麵兒 (沾麵)、Takoyaki wanaka/Kukuru (章魚燒)。</p>
                    <p class="notes"><strong>伴手禮：</strong> <span class="must-buy">🍮 CANELÉ du JAPON 可麗露</span>。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Dotonbori+Osaka" target="_blank" class="nav-button">導航到道頓堀美食區</a>
                </div>
            </div>

            <div class="day-card">
                <h2>Day 6: 12/25（四）✈️ 啟程返家</h2>
                <div class="item-card food-card">
                    <h3>☕ 早午餐建議</h3>
                    <p>🥑 <strong>Neel coffee</strong> (中崎町) 或 <strong>堺筋俱樂部</strong> (北濱)。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Neel+coffee+Nakazakicho" target="_blank" class="nav-button">導航到 Neel coffee</a>
                </div>

                <div class="item-card transport-card">
                    <h3>✈️ 前往關西機場 KIX T1</h3>
                    <p>預計 13:00 出發。航班 CX565 (16:15 離境)。</p>
                    <a href="https://www.google.com/maps/search/?api=1&query=Kansai+International+Airport+Terminal+1" target="_blank" class="nav-button">導航到關西機場</a>
                </div>
            </div>

        </section>
        
        <section id="tools-content" class="tab-content" style="display:none;">

            <div class="tools-section">
                <h3>✈️ 航班與住宿資訊</h3>
                <table class="info-table">
                    <tr><th>去程</th><td>CX564 桃園 &rarr; KIX (11:15-14:55)</td></tr>
                    <tr><th>回程</th><td>CX565 KIX &rarr; 桃園 (16:15-18:30)</td></tr>
                    <tr><th>京都住宿</th><td>Prince Smart Inn Kyoto Sanjo</td></tr>
                    <tr><th>大阪住宿</th><td>HOTEL FORZA OSAKA KITAHAMA</td></tr>
                    <tr><th>預約代號</th><td class="important-code">請在此填寫您的代號</td></tr>
                </table>
            </div>
            
            <div class="tools-section">
                <h3>🚨 緊急聯絡電話</h3>
                <table class="info-table">
                    <tr><th>日本報警</th><td>110</td></tr>
                    <tr><th>日本救護/消防</th><td>119</td></tr>
                    <tr><th>駐大阪辦事處</th><td>+81-6-6440-3600</td></tr>
                    <tr><th>信用卡掛失</th><td class="important-code">請填寫您的銀行電話</td></tr>
                </table>
            </div>

            <div class="tools-section">
                <h3>💰 記帳/預算表 (Local Storage 離線版)</h3>
                <div id="budget-summary" class="summary-box">
                    <p>總預算: ¥0 / 總支出: ¥0</p>
                </div>
                
                <div class="input-form">
                    <input type="number" id="amount" placeholder="金額 (¥)" required>
                    <input type="text" id="description" placeholder="項目/備註">
                    <select id="category">
                        <option value="food">餐飲</option>
                        <option value="transport">交通</option>
                        <option value="shopping">購物</option>
                        <option value="misc">其他</option>
                    </select>
                    <button id="add-expense" class="nav-button">新增支出</button>
                </div>
                
                <ul id="expense-list" class="expense-list">
                    </ul>
            </div>
        </section>

    </main>

    <script src="app.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.tab-button');
            const contents = document.querySelectorAll('.tab-content');

            // --- 分頁切換邏輯 ---
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = e.target.getAttribute('data-target');

                    // 移除所有 active 狀態
                    tabs.forEach(t => t.classList.remove('active'));
                    contents.forEach(c => c.style.display = 'none');

                    // 設定選中的 tab 和內容為 active
                    e.target.classList.add('active');
                    document.getElementById(targetId).style.display = 'block';
                });
            });
            
            // --- 簡易離線記帳功能 (使用 Local Storage) ---
            const expenseList = document.getElementById('expense-list');
            const addExpenseBtn = document.getElementById('add-expense');
            const amountInput = document.getElementById('amount');
            const descriptionInput = document.getElementById('description');
            const categorySelect = document.getElementById('category');
            
            let expenses = JSON.parse(localStorage.getItem('travelExpenses')) || [];
            
            function renderExpenses() {
                expenseList.innerHTML = '';
                let total = 0;
                
                expenses.forEach((exp) => {
                    total += exp.amount;
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span class="category-${exp.category}">[${exp.category.toUpperCase()}]</span> 
                        ${exp.description} 
                        <span class="expense-amount">¥ ${exp.amount.toLocaleString()}</span>
                    `;
                    expenseList.appendChild(li);
                });
                
                document.getElementById('budget-summary').innerHTML = 
                    `<p>總預算: ¥[請手動填寫] / 總支出: ¥${total.toLocaleString()}</p>`;
                
                localStorage.setItem('travelExpenses', JSON.stringify(expenses));
            }
            
            addExpenseBtn.addEventListener('click', () => {
                const amount = parseInt(amountInput.value);
                const description = descriptionInput.value || categorySelect.value;
                const category = categorySelect.value;
                
                if (amount > 0) {
                    expenses.push({ amount, description, category, timestamp: Date.now() });
                    amountInput.value = '';
                    descriptionInput.value = '';
                    renderExpenses();
                } else {
                    alert('請輸入有效金額');
                }
            });
            
            renderExpenses(); // 載入時渲染一次
        });
    </script>
</body>
</html>